<VirtualHost *:80>
  ServerName assets.pugetive.net
  Include sites-available/shared_assets.conf
  Header set Access-Control-Allow-Origin "http://pugetive.net"
</VirtualHost>

<IfModule mod_ssl.c>
<VirtualHost *:443>
  ServerName assets.pugetive.net

  Include sites-available/shared_ssl.conf

  SSLCertificateFile /etc/letsencrypt/live/pugetive.net/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/pugetive.net/privkey.pem
  SSLCertificateChainFile /etc/letsencrypt/live/pugetive.net/chain.pem

  Include sites-available/shared_assets.conf

  # http://stackoverflow.com/questions/14003332/access-control-allow-origin-wildcard-subdomains-ports-and-protocols
  # SetEnvIf Origin ^(https?://.+\.experi.com(?::\d{1,5})?)$   CORS_ALLOW_ORIGIN=$1
  # Header append Access-Control-Allow-Origin  %{CORS_ALLOW_ORIGIN}e   env=CORS_ALLOW_ORIGIN
  # Header merge  Vary "Origin"
</VirtualHost>
</IfModule>


<VirtualHost *:80>
  ServerName pugetive.net
  ServerAlias *.pugetive.net

  RailsEnv staging

  # <Location />
  #   AuthType Basic
  #   AuthName "Experi Staging Site (one time login--ask Todd for details)"
  #   AuthUserFile "/home/deployer/.htpasswd"
  #   Satisfy Any
  #   require valid-user
  # </Location>

  Include sites-available/shared_web.conf
</VirtualHost>


<IfModule mod_ssl.c>
<VirtualHost *:443>
  ServerName pugetive.net
  ServerAlias *.pugetive.net

  RailsEnv staging

  Include sites-available/shared_ssl.conf

  SSLCertificateFile /etc/letsencrypt/live/pugetive.net/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/pugetive.net/privkey.pem
  SSLCertificateChainFile /etc/letsencrypt/live/pugetive.net/chain.pem

  Include sites-available/shared_web.conf
</VirtualHost>
</IfModule>
